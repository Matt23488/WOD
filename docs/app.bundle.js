!function n(r,o,l){function c(t,e){if(!o[t]){if(!r[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(u)return u(t,!0);var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}var a=o[t]={exports:{}};r[t][0].call(a.exports,function(e){return c(r[t][1][e]||e)},a,a.exports,n,r,o,l)}return o[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("./Character/Character"),s=e("./Dice"),a=(r.prototype.goBack=function(){"sheet"===this.mode()?this.mode("list"):(this.mode("sheet"),this._previousSection&&(window.location.hash=this._previousSection))},r.prototype.newCharacter=function(){this.characters.push(n.default.newCharacter()),this.characterId(this.characters().length-1),this.mode("sheet")},r.prototype.selectCharacter=function(e){this.characterId(this.characters.indexOf(e)),this.mode("sheet")},r.prototype.deleteCharacter=function(e){if(confirm("Are you sure you want to delete "+this.character().name()+"? (As long as you don't save, your character won't be gone.)")){var t=this.characterId();this.characterId(0),this.characters.remove(this.characters()[t]),this.mode("list")}},r.prototype.saveCharacters=function(){window.localStorage.setItem("characters",JSON.stringify(this.realCharacters().map(function(e){return e.toJson()}))),alert("Characters saved successfully!")},r.prototype.downloadCharacter=function(){var e=JSON.stringify(this.character().toJson()),t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",this.character().name()+".json"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},r.prototype.uploadCharacter=function(){var s=this,a=document.createElement("input");a.type="file",a.accept=".json",a.style.display="none",a.addEventListener("change",function(e){var t=a.files[0];if(t){var i=new FileReader;i.onload=function(e){var t=e.target.result;s.characters.push(n.default.fromJson(JSON.parse(t))),s.characterId(s.characters().length-1),s.mode("sheet")},i.readAsText(t)}}),document.body.appendChild(a),a.click(),document.body.removeChild(a)},r.prototype.switchMode=function(e){var t=this;return function(){"list"!==t.mode()&&document.getElementById(e)?t._previousSection=e:t._previousSection=null,window.location.hash="",t.mode(e)}},r);function r(){var e=this,t=(JSON.parse(window.localStorage.getItem("characters"))||[]).map(n.default.fromJson);t.unshift(n.default.newCharacter()),t[0].ghost=!0,this.mode=ko.observable("list"),this.characterId=ko.observable(0),this.characters=ko.observableArray(t),this.realCharacters=ko.computed(function(){return e.characters().filter(function(e){return!e.ghost})},this),this.character=ko.computed(function(){return e.characters()[e.characterId()]},this),this.dice=new s.default,this._previousSection=null}i.default=a},{"./Character/Character":2,"./Dice":8}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("./Damage"),a=e("./Equipment"),n=e("./InventoryItem"),r=e("./Merit"),o=e("./Note"),l=e("../utils"),c=(u.newCharacter=function(){return new u({name:function(){for(var e=l.randomInteger(5,12),t=l.randomInteger(5,12),i="",s="",a=0;a<e;a++){var n=h.charAt(l.randomInteger(0,h.length));0===a&&(n=n.toUpperCase()),i+=n}for(var a=0;a<t;a++){var n=h.charAt(l.randomInteger(0,h.length));0===a&&(n=n.toUpperCase()),s+=n}return i+" "+s}(),player:"",age:0,vice:"",virtue:"",origins:"",gender:"",concept:"",chronicle:"",intelligence:1,strength:1,presence:1,wits:1,dexterity:1,manipulation:1,resolve:1,stamina:1,composure:1,academics:0,robotics:0,crafts:0,investigation:0,medicine:0,occult:0,politics:0,science:0,athletics:0,brawl:0,drive:0,ranged:0,larceny:0,stealth:0,survival:0,weaponry:0,animalKen:0,empathy:0,expression:0,intimidation:0,persuasion:0,socialize:0,streetwise:0,subterfuge:0,merits:[],spells:[],flaws:[],size:5,armor:0,experience:0,morality:7,weapons:[],equipment:[],inventory:[],notes:[]})},u.fromJson=function(e){return new u(e)},u.prototype.onComponentClick=function(e,t){t.currentTarget.getElementsByTagName("input")[0].focus()},u.prototype.newItem=function(e,t){return function(){e.push(new t)}},u.prototype.removeItem=function(t){return function(e){t.remove(e)}},u.prototype.moveItem=function(s,a){return function(e){var t=s.indexOf(e),i=t+a;i<0||i>=s().length||(s.splice(t,1),s.splice(i,0,e))}},u.prototype.clearUsed=function(e){return function(){e(0)}},u.prototype.toJson=function(){return{name:this.name(),player:this.player(),age:this.age(),vice:this.vice(),virtue:this.virtue(),origins:this.origins(),gender:this.gender(),concept:this.concept(),chronicle:this.chronicle(),intelligence:this.intelligence(),wits:this.wits(),resolve:this.resolve(),strength:this.strength(),dexterity:this.dexterity(),stamina:this.stamina(),presence:this.presence(),manipulation:this.manipulation(),composure:this.composure(),bashing:this.damage.bashing(),lethal:this.damage.lethal(),aggravated:this.damage.aggravated(),usedMagic:this.usedMagic(),usedWillpower:this.usedWillpower(),academics:this.academics(),robotics:this.robotics(),crafts:this.crafts(),investigation:this.investigation(),medicine:this.medicine(),occult:this.occult(),politics:this.politics(),science:this.science(),athletics:this.athletics(),brawl:this.brawl(),drive:this.drive(),ranged:this.ranged(),larceny:this.larceny(),stealth:this.stealth(),survival:this.survival(),weaponry:this.weaponry(),animalKen:this.animalKen(),empathy:this.empathy(),expression:this.expression(),intimidation:this.intimidation(),persuasion:this.persuasion(),socialize:this.socialize(),streetwise:this.streetwise(),subterfuge:this.subterfuge(),merits:this.merits().map(function(e){return{name:e.name(),value:e.value()}}),spells:this.spells().map(function(e){return{name:e.name(),value:e.value()}}),flaws:this.flaws().map(function(e){return{name:e.name(),value:e.value()}}),size:this.size(),armor:this.armor(),experience:this.experience(),morality:this.morality(),weapons:this.weapons().map(function(e){return{name:e.name(),description:e.description()}}),equipment:this.equipment().map(function(e){return{name:e.name(),description:e.description()}}),inventory:this.inventory().map(function(e){return{name:e.name(),description:e.description(),quantity:e.quantity()}}),notes:this.notes().map(function(e){return e.value()})}},u);function u(e){var t=this;this.ghost=!1,this.name=ko.observable(e.name),this.player=ko.observable(e.player),this.age=ko.observable(e.age).extend({numeric:{precision:0}}),this.vice=ko.observable(e.vice),this.virtue=ko.observable(e.virtue),this.origins=ko.observable(e.origins),this.gender=ko.observable(e.gender),this.concept=ko.observable(e.concept),this.chronicle=ko.observable(e.chronicle),this.intelligence=ko.observable(e.intelligence),this.strength=ko.observable(e.strength),this.presence=ko.observable(e.presence),this.wits=ko.observable(e.wits),this.dexterity=ko.observable(e.dexterity),this.manipulation=ko.observable(e.manipulation),this.resolve=ko.observable(e.resolve),this.stamina=ko.observable(e.stamina),this.composure=ko.observable(e.composure),this.academics=ko.observable(e.academics),this.robotics=ko.observable(e.robotics),this.crafts=ko.observable(e.crafts),this.investigation=ko.observable(e.investigation),this.medicine=ko.observable(e.medicine),this.occult=ko.observable(e.occult),this.politics=ko.observable(e.politics),this.science=ko.observable(e.science),this.athletics=ko.observable(e.athletics),this.brawl=ko.observable(e.brawl),this.drive=ko.observable(e.drive),this.ranged=ko.observable(e.ranged),this.larceny=ko.observable(e.larceny),this.stealth=ko.observable(e.stealth),this.survival=ko.observable(e.survival),this.weaponry=ko.observable(e.weaponry),this.animalKen=ko.observable(e.animalKen),this.empathy=ko.observable(e.empathy),this.expression=ko.observable(e.expression),this.intimidation=ko.observable(e.intimidation),this.persuasion=ko.observable(e.persuasion),this.socialize=ko.observable(e.socialize),this.streetwise=ko.observable(e.streetwise),this.subterfuge=ko.observable(e.subterfuge),this.merits=ko.observableArray(e.merits.map(function(e){return new r.default(e.name,e.value)})),this.spells=ko.observableArray(e.spells.map(function(e){return new r.default(e.name,e.value)})),this.flaws=ko.observableArray(e.flaws.map(function(e){return new r.default(e.name,e.value)})),this.size=ko.observable(e.size).extend({numeric:{precision:0,min:1,max:10}}),this.speed=ko.computed(function(){return t.strength()+t.dexterity()+5},this),this.defense=ko.computed(function(){return Math.min(t.dexterity(),t.wits())},this),this.armor=ko.observable(e.armor).extend({numeric:{precision:0}}),this.initiative=ko.computed(function(){return t.dexterity()+t.composure()},this),this.experience=ko.observable(e.experience).extend({numeric:{precision:0}}),this.morality=ko.observable(e.morality).extend({numeric:{precision:0,min:1,max:10}}),this.weapons=ko.observableArray(e.weapons.map(function(e){return new a.default(e.name,e.description)})),this.equipment=ko.observableArray(e.equipment.map(function(e){return new a.default(e.name,e.description)})),this.inventory=ko.observableArray(e.inventory.map(function(e){return new n.default(e.name,e.description,e.quantity)})),this.notes=ko.observableArray(e.notes.map(function(e){return new o.default(e)})),this.health=ko.computed(function(){return t.stamina()+t.size()},this),this.damage=new s.default(this.health,e.bashing,e.lethal,e.aggravated),this.magic=ko.computed(function(){return t.resolve()+t.composure()},this),this.usedMagic=ko.observable(e.usedMagic||0),this.magic.subscribe(function(e){t.usedMagic()>e&&t.usedMagic(e)},this),this.willpower=ko.computed(function(){return t.resolve()+t.composure()},this),this.usedWillpower=ko.observable(e.usedWillpower||0),this.willpower.subscribe(function(e){t.usedWillpower()>e&&t.usedWillpower(e)},this)}i.default=c;var h="abcdefghijklmnopqrstuvwxyz";ko.bindingHandlers.attribute={init:function(i,s){for(var t=[],e=function(i){var e=document.createElement("span");e.classList.add("attribute-dot"),e.dataset.toggle="tooltip",e.title=""+(i+1),$(e).tooltip(),t.push(e),e.addEventListener("pointerenter",function(){t.forEach(function(e,t){t<=i&&e.classList.add("hoverFilled")})}),e.addEventListener("pointerleave",function(){t.forEach(function(e){e.classList.remove("hoverFilled")})})},a=0;a<s().max;a++)e(a);var n=document.createElement("div");n.classList.add("clear-dot"),n.innerHTML="&times;",n.dataset.toggle="tooltip",n.title="Clear",n.addEventListener("click",function(){s().value(0)}),i.appendChild(n),$(n).tooltip(),t.forEach(function(e,t){i.appendChild(e),e.addEventListener("click",function(){s().value(t+1)})})},update:function(e,t){for(var i=t().value(),s=e.getElementsByClassName("attribute-dot"),a=0;a<s.length;a++){var n=s[a];n.style.backgroundColor=null,n.style.borderColor=null,a<i&&(n.style.backgroundColor="var(--body-color)",n.style.borderColor="var(--body-color)")}}},ko.bindingHandlers.readOnlyAttribute={init:function(e,t){for(var i=0;i<t().max;i++){var s=document.createElement("span");s.classList.add("attribute-dot"),e.appendChild(s)}},update:function(e,t){for(var i=t().value(),s=e.getElementsByTagName("span"),a=0;a<s.length;a++)s[a].classList.remove("filled"),a<i&&s[a].classList.add("filled")}},ko.bindingHandlers.used={init:function(t,i){for(var s=[],e=function(i){var e=document.createElement("span");e.classList.add("attribute-dot"),t.appendChild(e),s.push(e),e.addEventListener("pointerenter",function(){s.forEach(function(e,t){t<=i&&e.classList.add("hoverFilled")})}),e.addEventListener("pointerleave",function(){s.forEach(function(e){e.classList.remove("hoverFilled")})})},a=0;a<12;a++)e(a);s.forEach(function(e,t){e.addEventListener("click",function(){i().value(t+1)})})},update:function(e,t){for(var i=t().value(),s=t().total(),a=e.getElementsByTagName("span"),n=0;n<a.length;n++)n<i?a[n].classList.add("filled-red"):a[n].classList.remove("filled-red"),n<s?a[n].classList.remove("HIDDEN"):a[n].classList.add("HIDDEN")}},ko.bindingHandlers.focusOnCreation={init:function(e){window.setTimeout(function(){e.value||e.focus()},1)}},ko.extenders.numeric=function(n,e){var r=e.precision||0,o=e.min||-1/0,l=e.max||1/0,t=ko.pureComputed({read:n,write:function(e){var t=n(),i=Math.pow(10,r),s=isNaN(e)?0:+e,a=Math.round(s*i)/i;a<o?a=o:l<a&&(a=l),a!==t?n(a):e!==t&&n.notifySubscribers(a)}}).extend({notify:"always"});return t(n()),t}},{"../utils":10,"./Damage":3,"./Equipment":4,"./InventoryItem":5,"./Merit":6,"./Note":7}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=(a.prototype.anyEmpty=function(){return this.bashing()+this.lethal()+this.aggravated()<this.totalHealth()},a.prototype.addBashing=function(){this.anyEmpty()?this.bashing(this.bashing()+1):0<this.bashing()?(this.bashing(this.bashing()-1),this.lethal(this.lethal()+1)):0<this.lethal()?(this.lethal(this.lethal()-1),this.aggravated(this.aggravated()+1)):alert("you ded")},a.prototype.addLethal=function(){this.anyEmpty()?this.lethal(this.lethal()+1):0<this.bashing()?(this.bashing(this.bashing()-1),this.lethal(this.lethal()+1)):0<this.lethal()?(this.lethal(this.lethal()-1),this.aggravated(this.aggravated()+1)):alert("you ded")},a.prototype.addAggravated=function(){this.anyEmpty()?this.aggravated(this.aggravated()+1):0<this.bashing()?(this.bashing(this.bashing()-1),this.aggravated(this.aggravated()+1)):0<this.lethal()?(this.lethal(this.lethal()-1),this.aggravated(this.aggravated()+1)):alert("you ded")},a.prototype.clearAll=function(){this.bashing(0),this.lethal(0),this.aggravated(0)},a);function a(e,t,i,s){var a=this;this.totalHealth=e,this.bashing=ko.observable(t||0),this.lethal=ko.observable(i||0),this.aggravated=ko.observable(s||0),e.subscribe(function(e){for(;a.bashing()+a.lethal()+a.aggravated()>e;)0<a.bashing()?a.bashing(a.bashing()-1):0<a.lethal()?a.lethal(a.lethal()-1):a.aggravated(a.aggravated()-1)},this)}i.default=s,ko.bindingHandlers.damageDisplay={init:function(e){for(var t=0;t<12;t++){var i=document.createElement("span");i.classList.add("damage"),i.classList.add("none"),e.appendChild(i)}},update:function(e,t){for(var i=t(),s=e.getElementsByTagName("span"),a=0;a<s.length;a++)a<i.aggravated()?(s[a].classList.remove("none"),s[a].classList.remove("bashing"),s[a].classList.remove("lethal"),s[a].classList.add("aggravated")):a-i.aggravated()<i.lethal()?(s[a].classList.remove("none"),s[a].classList.remove("bashing"),s[a].classList.remove("aggravated"),s[a].classList.add("lethal")):a-i.aggravated()-i.lethal()<i.bashing()?(s[a].classList.remove("none"),s[a].classList.remove("lethal"),s[a].classList.remove("aggravated"),s[a].classList.add("bashing")):(s[a].classList.remove("bashing"),s[a].classList.remove("lethal"),s[a].classList.remove("aggravated"),s[a].classList.add("none")),a<i.totalHealth()?s[a].classList.remove("HIDDEN"):s[a].classList.add("HIDDEN")}}},{}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function s(e,t){this.name=ko.observable(e||""),this.description=ko.observable(t||"")}i.default=s},{}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=(a.prototype.getDisplayText=function(){return this.quantity()+" "+this.name()},a);function a(e,t,i){this.name=ko.observable(e||""),this.description=ko.observable(t||""),this.quantity=ko.observable(i||1),this.displayText=ko.computed(this.getDisplayText,this)}i.default=s},{}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function s(e,t){this.name=ko.observable(e||""),this.value=ko.observable(t||0)}i.default=s},{}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function s(e){this.value=ko.observable(e||"")}i.default=s},{}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var d=e("./utils"),s=(a.prototype.incrementDicePool=function(e){var t=this;return function(){t.dicePool(t.dicePool()+e)}},a.prototype.rollDice=function(){new n(this).beginRoll()},a);function a(){var e=this;this.dicePool=ko.observable(1),this.rollRounds=ko.observableArray([]),this.rollingInProgress=ko.observable(!1),this.totalDiceSuccesses=ko.computed(function(){return e.rollingInProgress()||0===e.rollRounds().length?-1:e.rollRounds().reduce(function(e,t){return e+t.reduce(function(e,t){return e+(7<t?1:0)},0)},0)},this),this.totalDiceSuccessesDisplay=ko.computed(function(){return 0<=e.totalDiceSuccesses()?""+e.totalDiceSuccesses():"???"},this)}i.default=s,ko.bindingHandlers.dice={update:function(e,t){var i=t()();if(0!==i.length){var s=e.getElementsByClassName("dice-round");if(s.length!==i.length){var a=document.createElement("div");a.classList.add("dice-round");for(var n=i[i.length-1],r=0;r<n.length;r++){var o=document.createElement("span"),l=d.randomFloat(0,.5);o.style.animation="rollingDice 0.5s linear -"+l+"s infinite alternate",o.classList.add("dice"),a.appendChild(o)}e.appendChild(a),s=e.getElementsByClassName("dice-round")}for(r=0;r<i.length;r++){n=i[r];for(var c=s[r].getElementsByClassName("dice"),u=0;u<n.length;u++){var h=n[u];o=c[u];-1!==h&&(o.style.animation=null,o.style.backgroundImage="url('images/dice-"+h+".png')")}}}else e.innerHTML=""}};var n=(r.prototype.beginRoll=function(){var i=this;this._diceObj.rollingInProgress(!0),this._diceObj.rollRounds.removeAll();for(var e=0;e<this._currentRoundRolls;e++)this._currentRoundResults.push(-1);this._diceObj.rollRounds.push(this._currentRoundResults),this._intervalHandle=window.setInterval(function(){var e=d.randomInteger(1,11);if(10===e&&i._nextRoundRolls++,i._currentRoundResults[i._currentDice]=e,i._diceObj.rollRounds.replace(i._diceObj.rollRounds()[i._currentRound],i._currentRoundResults),i._currentDice++,i._currentDice===i._currentRoundRolls){if(0===i._nextRoundRolls)return window.clearInterval(i._intervalHandle),void i._diceObj.rollingInProgress(!1);i._currentRound++,i._currentRoundRolls=i._nextRoundRolls,i._nextRoundRolls=0,i._currentDice=0,i._currentRoundResults=[];for(var t=0;t<i._currentRoundRolls;t++)i._currentRoundResults.push(-1);i._diceObj.rollRounds.push(i._currentRoundResults)}},250)},r);function r(e){this._diceObj=e,this._currentRound=0,this._currentDice=0,this._currentRoundRolls=e.dicePool(),this._currentRoundResults=[],this._nextRoundRolls=0,this._intervalHandle=null}},{"./utils":10}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("./Application"),a=e("./Character/Equipment"),n=e("./Character/InventoryItem"),r=e("./Character/Merit"),o=e("./Character/Note"),l={Equipment:a.default,InventoryItem:n.default,Merit:r.default,Note:o.default};Object.defineProperty(window,"constructors",{value:l});var c=new s.default;function u(e){e?$("[data-toggle='tooltip']").tooltip():$("[data-toggle='tooltip']").tooltip("dispose")}ko.applyBindings(c),Object.defineProperty(window,"app",{value:c}),window.addEventListener("resize",function(){u(992<=window.outerWidth)}),u(992<=window.outerWidth)},{"./Application":1,"./Character/Equipment":4,"./Character/InventoryItem":5,"./Character/Merit":6,"./Character/Note":7}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.randomInteger=function(e,t){var i;return void 0===e&&(e=0),void 0===t&&(t=10),t<e&&(e=(i=[t,e])[0],t=i[1]),Math.floor(Math.random()*(t-e))+e},i.randomFloat=function(e,t){var i;return void 0===e&&(e=0),void 0===t&&(t=1),t<e&&(e=(i=[t,e])[0],t=i[1]),Math.random()*(t-e)+e}},{}]},{},[9]);
//# sourceMappingURL=app.bundle.js.map
